<div #f class="{{el.classes}}" >
    <form *ngIf="sent == null" (ngSubmit)="onSubmit(el.action,$event)" class="{{el.boxclasses}}" autocomplete="off" role="presentation">
      <div *ngIf="f.classList.contains('twocol')">
          <div class="col1 form-cols">
            <div *ngFor="let field of el.fields; let idx = index" class="form-group" [ngClass]="field.classes.indexOf('col1') !== -1 ? 'col1' : ''" #fld>
              <div *ngIf="fld.classList.contains('col1')">
                <ng-container *ngTemplateOutlet="fields;context:{field:field}"></ng-container>
              </div>
            </div>
          </div>
          <div class="col2 form-cols">
            <div *ngFor="let field of el.fields; let idx = index" class="form-group" [ngClass]="field.classes.indexOf('col2') !== -1 ? 'col2' : ''" #fld>
              <div *ngIf="fld.classList.contains('col2')">
                  <ng-container *ngTemplateOutlet="fields;context:{field:field}"></ng-container>
              </div>
            </div>
          </div>
          <div *ngFor="let field of el.fields; let idx = index" class="form-group"  [ngClass]="field.classes.indexOf('nocol') !== -1 ? 'nocol' : ''" #fld>
          <div *ngIf="fld.classList.contains('nocol')">
            <ng-container *ngTemplateOutlet="fields;context:{field:field}"></ng-container>
          </div>
          </div>
      </div>
      <div *ngIf="!f.classList.contains('twocol')">
        <div *ngFor="let field of el.fields; let idx = index" class="form-group">
          <ng-container *ngTemplateOutlet="fields;context:{field:field}"></ng-container>
        </div>
      </div>
    </form>
  
    <p *ngIf="sent == true">
      Thank you for your enquiry, we'll be in touch shortly.
    </p>
    <p *ngIf="sent == false">
      Sorry there was a problem sending your enquiry, please try again.
    </p>
  </div>

  
  <!-- <form (ngSubmit)="onSubmit('submitcontact',$event,el.link)" class="" autocomplete="off" role="presentation">
    <div *ngIf="sent == ''">
      <h3 class="text-secondary bold formheading">Let's talk more...</h3>
    <input type="text" value="" autocomplete="" class="form-control" id="fld-name" name="name" required placeholder="Full Name" class="placeholder-primary" (keyup)="doForm($event.target.value,'name')" >
    <input type="text" value="" autocomplete="" class="form-control" id="fld-email" name="email" required placeholder="Email Address" class="placeholder-primary" (keyup)="doForm($event.target.value,'email')" >
    <input type="text" value="" autocomplete="" class="form-control" id="fld-phone" name="phone" placeholder="Telephone Number" class="placeholder-primary" (keyup)="doForm($event.target.value,'phone')" >
    <button type="submit" class="cta form-control btn rel" id="fld-submit" name="Submit" onclick="return gtag_report_conversion(window.location.href)">Submit ></button>
    </div>
    <div *ngIf="sent == 'true'">
      <h3 class="text-secondary bold formheading">Thank you</h3>
      <p>We will respond to your enquiry shortly.</p>
    </div>
    <div *ngIf="sent == 'false'">
      <p>Sorry there was a problem sending the message.</p>
    </div>
  </form> -->
  
  
  
  <ng-template #fields let-field="field">
    <div *ngIf="field.prefix !== ''">
     <br /> <p style="font-size:12px;">{{field.prefix}}</p>
    </div>
    <ion-list [ngSwitch]="field.type">
      <ion-item *ngSwitchCase="'text'">
        
          <ion-input label="{{field.name}}" type="text" value="{{field.value }}" autocomplete="{{field.autocomplete ? field.autocomplete : 'true'}}" class="form-control" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary {{field.classes}}"  (keyup)="doForm($event,field.key)" (change)="doForm($event,field.key)" (click)="doForm($event,field.key)" ></ion-input>
          
      </ion-item>
      <ion-item *ngSwitchCase="'textarea'" lines="none">
         <ion-textarea label="{{field.name}}" class="form-control" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary {{field.classes}}" [(ngModel)]="form[field.key]" (keyup)="doForm($event,field.key)" (change)="doForm($event,field.key)" (click)="doForm($event,field.key)" [counter]="field.counter"
         maxlength="{{field.maxlength}}" [autoGrow]="field.autogrow"></ion-textarea>
      </ion-item>
  
      <ion-item *ngSwitchCase="'select'">
               <ion-select label="{{field.name}}" value="{{field.value}}" class="form-control" id="fld-{{field.name | alias}}" [attr.name]="field.name" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary {{field.classes}}" [(ngModel)]="form[field.key] ?  form[field.key] : field.value"  (ngModelChange)="doForm($event,field.key)">
                      
                <ion-select-option *ngFor="let opt of field.options" [value]="opt.label">
                  {{opt.label}}
                </ion-select-option>

              
               <!--<ng-container *ngFor="let opt of field.options | format : 'json'">
                
                <optgroup *ngIf="opt.sublist" label="{{opt.name}}">
                  {{opt.name}}
                  <option *ngFor="let subopt of opt.sublist">
                    {{subopt.name}}
                  </option>
                 </optgroup>

                 <ion-select-option *ngIf="!opt.sublist">
                   {{opt.value}}
                 </ion-select-option>
               </ng-container>-->

             </ion-select>
         
            </ion-item>

      <ion-item *ngSwitchCase="'number'">
         <ion-input label="{{field.name}}" type="number" class="form-control {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary" [(ngModel)]="form[field.key]"></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'email'">
         <ion-input label="{{field.name}}" type="email" class="form-control {{field.classes}}" onpaste="return false;" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary" [(ngModel)]="form[field.key]" (keyup)="doForm($event,field.key)" ></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'tel'">
         <ion-input label="{{field.name}}" type="tel" class="form-control {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="placeholder-primary" [(ngModel)]="form[field.key]"></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'date'">
        <ion-input label="{{field.name}}" type="date" class="form-control {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="text-primary" [(ngModel)]="form[field.key]"></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'time'">
        <ion-input label="{{field.name}}" type="time" class="form-control {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" [required]="field.required" placeholder="{{field.placeholder}}" class="text-primary" [(ngModel)]="form[field.key]"></ion-input>
      </ion-item>
      <ion-item *ngSwitchCase="'checkbox'">
        <ion-input label="{{field.name}}" type="checkbox" class="form-control {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" name="{{field.name}}"></ion-input><p class="checkbox-label">{{field.value}}</p>
      </ion-item>
      <ion-item *ngSwitchCase="'submit'" lines="none">
        <ion-button type="submit" class="form-control btn rel {{field.classes}}" [ngClass]="canSubmit ? '' : 'cta-disabled'" id="fld-{{field.name | alias}}">{{field.name}}</ion-button>
      </ion-item>
      <ion-item *ngSwitchCase="'hidden'">
        <ion-input type="hidden" class="form-control btn rel {{field.classes}}" id="fld-{{field.name | alias}}" name="{{field.name}}" ></ion-input>
  
      <!-- <div *ngIf="field.name == 'address-finder'" class="">
           <comp-addressfinder (callback)="fillAddress($event)" [form]="form"></comp-addressfinder>
        </div>-->
  
      </ion-item>
      
     <!-- <div *ngSwitchCase="'recaptcha'" class="{{field.classes}}">
        <re-captcha (resolved)="handleCorrectCaptcha($event)" siteKey="6LfA0DcUAAAAAAvH9jHrtpvWebFikY5hdnUDYtLD"></re-captcha>
     </div>-->
    </ion-list>
   <div *ngIf="field.suffix !== ''">
     <p style="font-size:12px;">{{field.suffix}}</p>
   </div>
  </ng-template>
